<!DOCTYPE html>
<html lang="pl">
    <head>
        <meta charset="utf-8">
        <meta name="vieport" content="">
        <title>Wyszukaj | Słownik Języków Wymierających</title>
        <link rel="stylesheet" href="/Endangered-Languages-Dictionary/styles.css">
        <script src="/Endangered-Languages-Dictionary/dictionary.js"></script>
        <script src="/Endangered-Languages-Dictionary/langs.js"></script>
        <script src="/Endangered-Languages-Dictionary/search.js"></script>
    </head>
    <body>
        <div class="header">
            <h1 id="website-header">Słownik Języków Wymierających</h1>
            <div class="nav">
                <nav class="nav-header">
                <a href="/Endangered-Languages-Dictionary/index.pl.html">Strona główna</a>&nbsp;
                |&nbsp;<a href="/Endangered-Languages-Dictionary/search.pl.html">Wyszukaj</a>&nbsp;
                |&nbsp;<a href="/Endangered-Languages-Dictionary/about.pl.html">O stronie</a>&nbsp;
                |&nbsp;Wybierz język:&nbsp;
                <select name="langs" title="Wybierz język">
                    <option value="pl">Polski</option>
                    <option value="en">English</option>
                    <option value="de">Deutsch</option>
                    <option value="es">Español</option>
                </select>&nbsp;
                <button type="submit" id="lang-submit" onclick="change_lang();">Zatwierdź</button>
                </nav>
            </div>
        </div>
        <form id="search">
            <input type="number" id="query-elasticity" name="elasticity" min="0" max="10" value="2" />
            <input type="text" id="query-text" name="text" placeholder="Wpisz szukany tekst" />
            <select name="dictionary" title="Wybierz słownik">
                <optgroup label="Kaszubski (Kaszëbsczi)">
                    <option value="pl_csb">Polski - Kaszubski (Kaszëbsczi)</option>
                    <option value="csb_pl">Kaszubski (Kaszëbsczi) - Polski</option>
                </optgroup>
                <optgroup label="Dolnołużycki (Dolnoserbski)">
                    <option value="pl_dsb">Polski - Dolnołużycki (Dolnoserbski)</option>
                    <option value="dsb_pl">Dolnołużycki (Dolnoserbski) - Polski</option>
                </optgroup>
                <optgroup label="Górnołużycki (Hornjoserbsce)">
                    <option value="pl_hsb">Polski - Górnołużycki (Hornjoserbsce) </option>
                    <option value="hsb_pl">Górnołużycki (Hornjoserbsce) - Polski</option>
                </optgroup>
                <optgroup label="Wilamowski (Wymysiöeryś)">
                    <option value="pl_wym">Polski - Wilamowski (Wymysiöeryś)</option>
                    <option value="wym_pl">Wilamowski (Wymysiöeryś) - Polski</option>
                </optgroup>
                <optgroup label="Rusiński">
                    <option value="pl_rue">Polski - Rusiński</option>
                    <option value="rue_pl">Rusiński - Polski</option>
                </optgroup>
            </select>
            <button type="submit" id="query-submit">Wyszukaj</button> 
        </form>
        <h4><strong>Wyniki wyszukiwania:</strong></h4>
        <div id="search-results"></div>
        <script>
            document.querySelector("#search").onsubmit = function(ev) {
                ev.preventDefault();
                const urlQuery = new URLSearchParams(window.location.search);
                console.log(urlQuery);
                var results = searchWithLevenshteinDist(urlQuery.get("text"), urlQuery.get("elasticity"), urlQuery.get("dictionary"));
                var resultsContainer = document.querySelector("#search-results");
                while(resultsContainer.firstChild) resultsContainer.removeChild(resultsContainer.lastChild);
                if(!results) {
                    resultsContainer.appendChild(document.createTextNode("Nie udało się znaleźć nic, co pasowałoby do wyszukiwanej frazy."));
                }
                else {
                    for(var res in results) {
                        console.log("Listing a word entry: " + res + "\n");
                        var wordEntry = document.createElement("a");
                        wordEntry.className = "search-result";
                        wordEntry.href = "/Endangered-Languages-Dictionary/entry.html?q=" + res;
                        wordEntry.appendChild(document.createTextNode(res));
                        resultsContainer.appendChild(wordEntry);
                    }
                }
            };
        </script>
    </body>
</html>